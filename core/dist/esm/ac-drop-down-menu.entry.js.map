{"file":"ac-drop-down-menu.entry.js","mappings":"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","names":[],"sources":["./src/components/molecules/ac-drop-down-menu/ac-drop-down-menu.scss?tag=ac-drop-down-menu","./src/components/molecules/ac-drop-down-menu/ac-drop-down-menu.tsx"],"sourcesContent":["@import \"../../../theme/variables\";\r\n@import \"../../../global/css/layout\";\r\n\r\nac-drop-down-menu {\r\n  display: flex;\r\n  flex: 1;\r\n  height: 44px;\r\n  padding: 0 !important;\r\n\r\n  .ac-drop-down-menu--compact {\r\n    .ac-button__native {\r\n      transition: all .2s ease !important;\r\n      padding: 0 ($spacer-tiny - 2) 0 !important;\r\n      span {\r\n        display: none;\r\n      }\r\n      svg {\r\n        display: none;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  .ac-drop-down-menu__button {\r\n    display: flex;\r\n    flex: 1;\r\n    align-items: center;\r\n    .ac-button__native {\r\n      padding: 0 $spacer-tiny 0;\r\n      width: 100%;\r\n    }\r\n\r\n    .ac-button__text {\r\n      flex: 1;\r\n      text-align: left;\r\n    }\r\n  }\r\n}\r\n\r\n.ac-drop-down-menu__list--compact {\r\n  .ac-list__item {\r\n    place-content: center center;\r\n    flex-direction: column;\r\n  }\r\n}\r\n","import { faChevronDown, faChevronUp } from '@fortawesome/free-solid-svg-icons';\r\nimport { Component, Element, Event, EventEmitter, Host, Prop, State, Watch, h } from '@stencil/core';\r\nimport { isNil } from 'ramda';\r\n\r\nimport { createControllerPortal } from '../../../behaviors/controller-behavior/create-controller-portal';\r\nimport { FocusBehavior } from '../../../behaviors/focus-behavior';\r\nimport { Bind } from '../../../utils/lang/bind';\r\nimport { ensureController } from '../../../utils/stencil/ensure-controller';\r\nimport { AcPanel } from '../../organisms/ac-panel/ac-panel';\r\nimport { AcPopper } from '../../portals/ac-popper/ac-popper';\r\nimport { AcFaIcon } from '../../utils/ac-fa-icon';\r\n\r\nimport { AcDropOption } from './ac-drop-option';\r\n\r\n@Component({\r\n  tag: 'ac-drop-down-menu',\r\n  styleUrl: './ac-drop-down-menu.scss'\r\n})\r\nexport class AcDropDownMenu {\r\n  /**\r\n   * A reference to the ac-panel.\r\n   */\r\n  private selectPanel: HTMLAcPanelElement;\r\n  /**\r\n   * Internal reference to the select panel.\r\n   */\r\n  private SelectPanel = createControllerPortal<AcPanel & AcPopper>(ensureController('ac-panel-controller'));\r\n  /**\r\n   * Reference to the component element.\r\n   */\r\n  @Element() host: HTMLAcDropDownMenuElement;\r\n  /**\r\n   * List of all options.\r\n   */\r\n  @Prop() options: AcDropOption[] = [];\r\n  /**\r\n   * Value of selected option.\r\n   */\r\n  @Prop({ reflect: true, mutable: true }) value: any;\r\n  /**\r\n   * Compact mode.\r\n   */\r\n  @Prop({ mutable: true }) compact: boolean;\r\n  /**\r\n   * Event call on option change.\r\n   */\r\n  @Event() selectChange: EventEmitter\r\n  /**\r\n   * Flag to control input focus.\r\n   */\r\n  hasFocus: boolean;\r\n  /**\r\n   * The instance of the FocusBehavior used to close the panel when the user clicks outside.\r\n   */\r\n  focusBehavior = new FocusBehavior(this);\r\n  /**\r\n   * Flag that control the panel visibility.\r\n   */\r\n  @State() isPanelOpen = false;\r\n\r\n  @Watch('isPanelOpen')\r\n  isShowingPanelDidUpdate() {\r\n    this.hasFocus = this.isPanelOpen;\r\n  }\r\n  componentDidLoad() {\r\n    if (this.options.length === 0) {\r\n      this.options = Array.from(this.host.querySelectorAll('ac-drop-option'))\r\n        .map((option: any) => {\r\n          return {\r\n          label: option.label || option.innerText.trim(),\r\n          value: option.value,\r\n          image: option.image\r\n        } as AcDropOption });\r\n      }\r\n    if (isNil(this.value) && this.options.length > 0) {\r\n        this.value = this.options[0].value;\r\n    }\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.isPanelOpen = false;\r\n  }\r\n  /**\r\n   * Toggle the panel view.\r\n   */\r\n  @Bind\r\n  whenBlur(element) {\r\n    // If the target element is'nt a child of the panel.\r\n    if (!this.selectPanel.contains(element)) {\r\n      if (this.isPanelOpen) {\r\n        this.isPanelOpen = !this.isPanelOpen;\r\n      }\r\n    }\r\n  }\r\n\r\n  @Bind\r\n  handlePanel() {\r\n    this.isPanelOpen = !this.isPanelOpen;\r\n  }\r\n\r\n  handleSelect(option: AcDropOption) {\r\n    this.isPanelOpen = !this.isPanelOpen;\r\n    this.value = option.value;\r\n    this.selectChange.emit(option);\r\n  }\r\n\r\n  render() {\r\n    const filterSelected = option => {\r\n      if (isNil(this.value)) {\r\n        return false;\r\n      }\r\n      if (isNil(option.value)) {\r\n        return false;\r\n      }\r\n      return option.value.toString() === this.value.toString()\r\n    };\r\n    const SelectPanel = this.SelectPanel;\r\n    return <Host class={{ 'ac-list': true }}>\r\n      <section style={{ display: 'none' }}>\r\n        <slot />\r\n      </section>\r\n      {this.options && this.options\r\n        .filter(filterSelected)\r\n        .map(x => (\r\n            <ac-button\r\n              class={{ 'ac-drop-down-menu__button': true, 'ac-drop-down-menu--compact': this.compact }}\r\n              theme={this.isPanelOpen ? 'primary' : 'light'}\r\n              onClick={this.handlePanel}\r\n              fill=\"flat\"\r\n            >\r\n                {x.image && <img slot=\"icon-start\" src={x.image} />}\r\n                <span>{x.label}</span>\r\n                {this.options.length > 0\r\n                  && <AcFaIcon slot=\"icon-end\" icon={this.isPanelOpen ? faChevronUp : faChevronDown} size={12} />}\r\n            </ac-button>\r\n        ))}\r\n      <SelectPanel\r\n        ref={selectPanel => this.selectPanel = selectPanel}\r\n        popperPivot={this.host}\r\n        reset={!this.isPanelOpen}\r\n      >\r\n          <ul class={{ 'ac-list': true, 'ac-drop-down-menu__list--compact': this.compact }}>\r\n            {this.options.map(option => (\r\n              <ac-drop-option class=\"ac-list__item\" label={option.label} onClick={() => this.handleSelect(option)}>\r\n                {option.image && <img src={option.image} slot=\"image\" class=\"ac-drop-down__image\" />}\r\n              </ac-drop-option>\r\n            ))}\r\n          </ul>\r\n      </SelectPanel>\r\n    </Host>\r\n  }\r\n}\r\n"],"version":3}