{"file":"ac-table.entry.js","mappings":";;;;;SAAgB,SAAS,CAAC,KAAK,EAAE,KAAK,GAAG,KAAK,EAAE,QAAQ;EAEtD,OAAO,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;;IAGrB,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC,QAAQ,CAAC,KAAK,SAAS,GAAG,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;IACzE,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC,QAAQ,CAAC,KAAK,SAAS,GAAG,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;;IAGzE,CAAC,GAAG,OAAO,CAAC,KAAK,QAAQ,GAAG,CAAC,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;IAChD,CAAC,GAAG,OAAO,CAAC,KAAK,QAAQ,GAAG,CAAC,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;;IAGhD,IAAI,KAAK,KAAK,MAAM,EAAE;MACpB,OAAO,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;KACvC;SAAM;MACL,OAAO,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;KACvC;GACF,CAAC,CAAC;AACL;;ACjBA,MAAM,YAAY,GAAG,KAAK;EACxB,MAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC;EACxB,QAAQ,IAAI;IACV,KAAK,QAAQ;MACX,OAAO,mBAAmB,KAAK,CAAC,KAAK,CAAC,IAAI,WAAW,KAAK,CAAC,KAAK,CAAC,KAAK,iBAAiB,CAAC;IAC1F;MACE,OAAO,KAAK,CAAC,KAAK,CAAC;GACtB;AACH,CAAC,CAAC;AAEK,MAAM,SAAS,GAAG,KAAK;EAC5B,MAAM,OAAO,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC;EACpC;;EAEE,UAAI,OAAO,EAAE,MAAM,KAAK,CAAC,OAAO,EAAE,EAAE,SAAS,EAAE,OAAO,GACjD,EAAE;AACX,CAAC;;ACXM,MAAM,SAAS,GAAG,KAAK;EAC5B,QACE;IAEE,KAAK,CAAC,OAAO;MACb,WAAK,KAAK,EAAC,gBAAgB;QACzB,EAAC,QAAQ,IAAC,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAC,MAAM,GAAE,CAC9C;IAEP,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,IAC/B,cACG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,IACrB,EAAC,SAAS,IACR,IAAI,EAAE,IAAI,CAAC,IAAI,EACf,KAAK,EAAE,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,EACpB,OAAO,EAAE,MAAM,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI,KAAK,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,IAAI,GACpF,CACH,CACE,CACN;IAEC,CAAC,CAAC,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC;MACrC;QACE,UAAI,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC,MAAM,IAAG,KAAK,CAAC,cAAc,IAAI,mBAAmB,CAAM,CAClF,GAAG,IAAI,CAER,EACR;AACJ,CAAC;;ACjCM,MAAM,WAAW,GAAG,KAAK;EAC9B,QACE;IACA,cACG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,IACvB,UACE,OAAO,EAAE,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,GAAG;OACpC,EACD,EAAE,EAAE,MAAM,CAAC,GAAG;MAEd,kBAAS,MAAM,CAAC,KAAK,CAAU;MAC9B,KAAK,CAAC,KAAK,CAAC,QAAQ,KAAK,MAAM,CAAC,GAAG;QAClC,YAAM,KAAK,EAAE,KAAK,CAAC,KAAK,GAAG,SAAS,KAAK,CAAC,KAAK,CAAC,QAAQ,QAAQ,GAAG,OAAO;UACtE,SAAG,KAAK,EAAC,iBAAiB,GAAK,CAC9B;UACH,YAAM,KAAK,EAAC,kBAAkB;UAAC,SAAG,KAAK,EAAC,kBAAkB,GAAK;cAAQ,CACxE,CACN,CACE,CACG,EACR;AACJ,CAAC;;ACvBD,MAAM,UAAU,GAAG,ysCAAysC;;;;;;;;;;;;MCY/sC,OAAO;;;;;;;;;;kBAiCgB;MAChC,QAAQ,EAAE,KAAK;MACf,QAAQ,EAAE,EAAE;MACZ,QAAQ,EAAE,CAAC;MACX,OAAO,EAAE;QACP,SAAS,EAAE,EAAE;QACb,SAAS,EAAE,EAAE;QACb,MAAM,EAAE,EAAE;OACX;KACF;;EAGD,iBAAiB;IACf,IAAI,IAAI,CAAC,KAAK,EAAE;MACd,IAAI,CAAC,MAAM,EAAE,CAAC;KACf;SAAM,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,OAAO,EAAE;MACtC,IAAI,CAAC,OAAO,mCACP,IAAI,CAAC,OAAO,KACf,IAAI,EAAE,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAC/E,CAAA;KACF;GACF;EAGD,WAAW,CAAC,EAAE;IACZ,IAAI,CAAC,MAAM,mCACN,IAAI,CAAC,MAAM,KACd,QAAQ,EAAE,EAAE,CAAC,MAAM,CAAC,EAAE,EACtB,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,KAAK,KAAK,GAAG,MAAM,GAAG,KAAK,GAC1D,CAAC;IACF,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;GACpB;EAIK,MAAA,MAAM;IACV,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;OACpB,IAAI,CAAC,IAAI;MACR,IAAI,CAAC,OAAO,oCACP,IAAI,CAAC,OAAO,KACf,IAAI,EAAE,IAAI,CAAC,IAAI,IACf,CAAC;MACH,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;KACzB,CAAC;OACD,KAAK,CAAC;MACL,IAAI,CAAC,OAAO,oCACP,IAAI,CAAC,OAAO,KACf,IAAI,EAAE,IAAI,IACV,CAAA;KACH,CAAC,CAAC;GACN;EAGD,UAAU;IACR,IAAI,CAAC,MAAM,EAAE,CAAC;GACf;EAED,gBAAgB;IACd,IAAI,IAAI,CAAC,KAAK,EAAE;MACd,IAAI,CAAC,MAAM,EAAE,CAAC;KACf;GACF;EAED,MAAM;IACJ,OAAO;MACL,IAAI,CAAC,OAAO;QACZ,aAAO,KAAK,EAAC,OAAO,IAClB,EAAC,WAAW,IAAC,OAAO,EAAE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,WAAW,EAAE,KAAK,EAAE,IAAI,CAAC,MAAM,GAAG,EAC/G,EAAC,SAAS,IACR,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,EACvB,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,EAC5B,QAAQ,EAAE,IAAI,CAAC,SAAS,EACxB,cAAc,EAAE,IAAI,CAAC,cAAc,EACnC,OAAO,EAAE,IAAI,CAAC,OAAO,GACrB,CACI;KACT,CAAC;GACH;;;;;;AArDD;EADC,IAAI;0CAQJ;AAIK;EAFL,IAAI;qCAiBJ;;;;;","names":[],"sources":["./src/utils/collections/sort-array.ts","./src/components/atoms/ac-table/children/table-cell.tsx","./src/components/atoms/ac-table/children/table-body.tsx","./src/components/atoms/ac-table/children/table-header.tsx","./src/components/atoms/ac-table/ac-table.scss?tag=ac-table","./src/components/atoms/ac-table/ac-table.tsx"],"sourcesContent":["export function sortArray(array, order = 'asc', property) {\r\n\r\n  return array.sort((a, b) => {\r\n\r\n    // force null to last\r\n    a = a[property] === null || a[property] === undefined ? '' : a[property];\r\n    b = b[property] === null || b[property] === undefined ? '' : b[property];\r\n\r\n    // force any string values to lowercase\r\n    a = typeof a === 'string' ? a.toLowerCase() : a;\r\n    b = typeof b === 'string' ? b.toLowerCase() : b;\r\n\r\n    // Return either 1 or -1 to indicate a params priority\r\n    if (order === 'desc') {\r\n      return (b > a) ? 1 : (b < a) ? -1 : 0;\r\n    } else {\r\n      return (a > b) ? 1 : (a < b) ? -1 : 0;\r\n    }\r\n  });\r\n}\r\n","import { h } from '@stencil/core';\r\n\r\nconst buildContent = props => {\r\n  const type = props.type;\r\n  switch (type) {\r\n    case 'status':\r\n      return `<ac-badge type=\"${props.value.type}\" text=\"${props.value.label}\" upper-case />`;\r\n    default:\r\n      return props.value;\r\n  }\r\n};\r\n\r\nexport const TableCell = props => {\r\n  const content = buildContent(props);\r\n  return (\r\n    // @ts-ignore\r\n    <td onClick={() => props.onClick()} innerHTML={content}>\r\n    </td>);\r\n};\r\n","import { faSpinner } from '@fortawesome/free-solid-svg-icons';\r\nimport { h } from '@stencil/core';\r\n\r\nimport { AcFaIcon } from '../../../utils/ac-fa-icon';\r\n\r\nimport { TableCell } from './table-cell';\r\n\r\nexport const TableBody = props => {\r\n  return (\r\n    <tbody>\r\n    {\r\n      props.loading &&\r\n      <div class=\"table--loading\">\r\n        <AcFaIcon icon={faSpinner} size={20} anim=\"spin\"/>\r\n      </div>\r\n    }\r\n    {props.rows && props.rows.map(row =>\r\n      <tr>\r\n        {props.columns.map(cell =>\r\n          <TableCell\r\n            type={cell.type}\r\n            value={row[cell.key]}\r\n            onClick={() => props.onSelect && cell.type !== 'action' ? props.onSelect(row) : null}\r\n          />\r\n        )}\r\n      </tr>,\r\n    )}\r\n    {\r\n      (!props.rows || props.rows.length === 0) ?\r\n        <tr>\r\n          <td colSpan={props.columns.length}>{props.noResultsLabel || 'No Results Found.'}</td>\r\n        </tr> : null\r\n    }\r\n    </tbody>\r\n  );\r\n};\r\n","import { h } from '@stencil/core';\r\n\r\nexport const TableHeader = props => {\r\n  return (\r\n    <thead>\r\n    <tr>\r\n      {props.columns.map(header =>\r\n        <th\r\n          onClick={props.order ? props.click : () => {\r\n          }}\r\n          id={header.key}\r\n        >\r\n          <strong>{header.label}</strong>\r\n          {props.order.property === header.key ?\r\n            <span class={props.order ? `order-${props.order.ordering} order` : 'order'}>\r\n                <i class=\"fas fa-arrow-up\"></i>\r\n          </span>\r\n            : <span class=\"order-space-icon\"><i class=\"fas fa-arrow-up \"></i> </span>}\r\n        </th>\r\n      )}\r\n    </tr>\r\n    </thead>\r\n  );\r\n};\r\n","@import \"../../../theme/variables\";\r\n\r\n// ---------------------------------------------------------------------------------------------------------------------\r\n// General Style\r\n// ---------------------------------------------------------------------------------------------------------------------\r\n\r\nac-table {\r\n  table {\r\n    position: relative;\r\n    width: 100%;\r\n    border-collapse: collapse;\r\n  }\r\n\r\n  thead {\r\n    th {\r\n      padding-bottom: 11px;\r\n      border-bottom: 2px solid var-color(\"neutral\", \"lighter\");\r\n      text-align: start;\r\n      white-space: nowrap;\r\n\r\n      strong {\r\n        padding-right: $spacer-tiny;\r\n        color: var-color(\"neutral\", \"darker\");\r\n        font-weight: normal;\r\n        pointer-events: none;\r\n      }\r\n\r\n      i {\r\n        &:before {\r\n          color: var-color(\"neutral\", \"inverted\");\r\n          font-size: $spacer-tiny;\r\n        }\r\n\r\n        &:first-child {\r\n          transform: translateY(-4px);\r\n          transition: transform $slow-transition;\r\n\r\n        }\r\n      }\r\n\r\n      .order {\r\n        display: inline-flex;\r\n        position: relative;\r\n        align-items: flex-start;\r\n        justify-content: flex-start;\r\n        pointer-events: none;\r\n\r\n        &.order-asc {\r\n          i {\r\n            &:first-child {\r\n              transform: rotate(180deg);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      .order-space-icon {\r\n        visibility: hidden;\r\n      }\r\n    }\r\n  }\r\n\r\n  td {\r\n    border-bottom: 1px solid var-color(\"neutral\", \"lighter\");\r\n  }\r\n\r\n  tbody {\r\n    tr {\r\n      &:hover {\r\n        background-color: var-color(\"primary\", \"normal\", 0.04);\r\n        cursor: pointer;\r\n      }\r\n\r\n      td {\r\n        & > * {\r\n          display: flex;\r\n          flex-direction: column;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  tbody {\r\n    .table--loading {\r\n      display: flex;\r\n      position: absolute;\r\n      align-items: center;\r\n      justify-content: center;\r\n      width: 100%;\r\n      height: 100%;\r\n      background-color: var-color(\"neutral\", \"contrast\", 0.8);\r\n    }\r\n  }\r\n}\r\n\r\n","import { Component, Event, EventEmitter, Prop, Watch, h, Method } from '@stencil/core';\r\n\r\nimport { sortArray } from '../../../utils/collections/sort-array';\r\nimport { Bind } from '../../../utils/lang/bind';\r\n\r\nimport { TableBody } from './children/table-body';\r\nimport { TableHeader } from './children/table-header';\r\n\r\n@Component({\r\n  tag: 'ac-table',\r\n  styleUrl: 'ac-table.scss'\r\n})\r\nexport class AcTable {\r\n  /*\r\n  * Event to be issued when there is a change in orders.\r\n  */\r\n  @Event({ eventName: 'changeOrder' }) change: EventEmitter;\r\n\r\n  /*\r\n  * Emit event when table update\r\n  */\r\n  @Event({ eventName: 'tableChange' }) tableChange: EventEmitter;\r\n  /*\r\n  *  Header and Rows, can be modified directly or using the fetch method.\r\n  */\r\n  @Prop({ mutable: true }) options: Options;\r\n  /*\r\n  *  The fetch method is a callback that should return options.\r\n  */\r\n  @Prop({ mutable: true }) fetch: any;\r\n  /*\r\n  * The selectRow is callback with row, use for actions with row.\r\n  */\r\n  @Prop({ mutable: true }) selectRow: any;\r\n  /*\r\n  * Table has skeleton, but use loading after you have already set the Header.\r\n  */\r\n  @Prop({ mutable: true }) loading: boolean;\r\n  /*\r\n  * label for results not found.\r\n  */\r\n  @Prop({ mutable: true }) noResultsLabel: string;\r\n  /*\r\n  * When the parameters are changed and there is a fetch method, a new request is triggered.\r\n  */\r\n  @Prop({ mutable: true }) params = {\r\n    ordering: 'asc',\r\n    property: '',\r\n    selected: 1,\r\n    filters: {\r\n      limitRows: '',\r\n      totalRows: '',\r\n      search: ''\r\n    }\r\n  };\r\n\r\n  @Watch('params')\r\n  onParamsDidUpdate() {\r\n    if (this.fetch) {\r\n      this.update();\r\n    } else if (!this.fetch && this.options) {\r\n      this.options = {\r\n        ...this.options,\r\n        rows: sortArray(this.options.rows, this.params.ordering, this.params.property)\r\n      }\r\n    }\r\n  }\r\n\r\n  @Bind\r\n  changeOrder(ev) {\r\n    this.params = {\r\n      ...this.params,\r\n      property: ev.target.id,\r\n      ordering: this.params.ordering === 'asc' ? 'desc' : 'asc',\r\n    };\r\n    this.change.emit();\r\n  }\r\n\r\n  @Bind\r\n  @Method()\r\n  async update() {\r\n    this.fetch(this.params)\r\n      .then(rows => {\r\n        this.options = ({\r\n          ...this.options,\r\n          rows: rows.rows\r\n        });\r\n        this.tableChange.emit();\r\n      })\r\n      .catch(() => {\r\n        this.options = ({\r\n          ...this.options,\r\n          rows: null\r\n        })\r\n      });\r\n  }\r\n\r\n  @Watch('fetch')\r\n  onAddFetch() {\r\n    this.update();\r\n  }\r\n\r\n  componentDidLoad() {\r\n    if (this.fetch) {\r\n      this.update();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return [\r\n      this.options &&\r\n      <table class=\"table\">\r\n        <TableHeader columns={this.options ? this.options.header : null} click={this.changeOrder} order={this.params}/>\r\n        <TableBody\r\n          rows={this.options.rows}\r\n          columns={this.options.header}\r\n          onSelect={this.selectRow}\r\n          noResultsLabel={this.noResultsLabel}\r\n          loading={this.loading}\r\n        />\r\n      </table>\r\n    ];\r\n  }\r\n}\r\n\r\nexport interface Options {\r\n  header: [object],\r\n  rows: [object]\r\n}\r\n"],"version":3}