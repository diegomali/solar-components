{"version":3,"file":"ac-pick-list.js","sourceRoot":"","sources":["../../../../src/components/organisms/ac-pick-list/ac-pick-list.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Prop, Host, h, State, Method, Element } from '@stencil/core';\nimport { AcOrderList } from '../../molecules/ac-order-list/ac-order-list';\nimport { Bind } from '../../../utils/lang/bind';\nimport dragula from 'dragula';\nimport { AcFaIcon } from '../../utils/ac-fa-icon';\nimport { faAngleDoubleRight, faAngleDoubleLeft } from '@fortawesome/free-solid-svg-icons';\nimport { AcOption } from '../../../utils/types/ac-option';\nimport { AcOrderListCustomEvent } from '../../../components';\n\n\n@Component({\n  tag: 'ac-pick-list',\n  styleUrl: 'ac-pick-list.scss'\n})\nexport class AcPickList {\n  private acListAvalibles: HTMLAcOrderListElement;\n  private acListSelectedOptions: HTMLAcOrderListElement;\n\n  /**\n   * Reference to the component\n   */\n  @Element() host: HTMLAcPickListElement;\n\n  /**\n   * Number of available options to select.\n   */\n  @State() numberAvailableOptionsSelected = 0;\n  /**\n   * Number of selected options.\n   */\n  @State() numberOfSelectedOptions = 0;\n  /**\n   * List of all options available.\n   */\n  @Prop() options: AcOption[];\n  /**\n   * Text to be search.\n   */\n  @Prop() searchLabel: string = 'Search';\n  /**\n   * Label to be show when no results is fouond.\n   */\n  @Prop() noResultsLabel: string;\n  /**\n   * Label for ac-list of avalible options\n   */\n  @Prop() availableLabel: string;\n  /**\n   * Label for ac-list of selected options\n   */\n  @Prop() selectedLabel: string;\n  /**\n   * Label of the button that add options on the  selected ac-list.\n   */\n  @Prop() addLabel: string = 'Add';\n  /**\n   * Label of the button that add all options on the selected ac-list.\n   */\n  @Prop() addAllLabel: string = 'Add all';\n  /**\n   * Label of the button that remove options on the on selected ac-list.\n   */\n  @Prop() removeLabel: string = 'Remove';\n  /**\n   * Label of the button that remove all options on the  selected ac-list.\n   */\n  @Prop() removeAllLabel: string = 'Remove All';\n\n  /**\n   * Return the selected items.\n   */\n  @Method()\n  getSelectedOptions() {\n    return Promise.resolve(this.acListSelectedOptions.options);\n  }\n\n  /**\n   * Method that add all options on the selected ac-list\n   */\n  @Bind\n  addAllOptions() {\n    if (this.acListAvalibles.options) {\n      this.acListSelectedOptions.options = [\n        ...this.acListAvalibles.options\n      ];\n      this.acListAvalibles.options = [];\n    }\n  }\n\n  /**\n   * Method that add options on the selected ac-list\n   */\n  @Bind\n  addSelectedOptions() {\n    if (this.acListAvalibles.options) {\n      this.acListSelectedOptions.options = this.acListAvalibles\n      .options\n      .reduce((newList, option) => {\n        if (option.selected) {\n          newList.push({\n            ...option,\n            selected: false\n          });\n        }\n        return newList\n      }, [...this.acListSelectedOptions.options]);\n      this.acListAvalibles.options = this.acListAvalibles.options\n        .filter(x => x.selected === false);\n    }\n  }\n\n  /**\n   * Method that remove all options on the selected ac-list\n   */\n  @Bind\n  removeAllOptions() {\n    this.acListAvalibles.options = [\n      ...this.acListAvalibles.options,\n      ...this.acListSelectedOptions.options\n    ];\n    this.acListSelectedOptions.options = [];\n  }\n\n  /**\n   * Method that remove options on the selected ac-list\n   */\n  @Bind\n  removeOptions() {\n    this.acListAvalibles.options = this.acListSelectedOptions.options\n    .reduce((newList, option) => {\n      if (option.selected) {\n        newList.push({\n          ...option,\n          selected: false\n        });\n      }\n      return newList;\n    }, [...this.acListAvalibles.options]);\n\n    this.acListSelectedOptions.options = this.acListSelectedOptions.options\n       .filter(x => x.selected === false);\n  }\n\n  /**\n   * Method that handle selected options.\n   */\n  @Bind\n  handleChangeAclistSelectedOptions(event: AcOrderListCustomEvent<AcOrderList>) {\n    if(event.detail) {\n      event.detail.getSelectedOptions()\n      .then(({length}) => this.numberOfSelectedOptions = length);\n    } else {\n      this.numberOfSelectedOptions = 0;\n    }\n  }\n  /**\n   * Method that handle changes on ac-list of avalibles options.\n   */\n  @Bind\n  handleChangeAclistAvailableOptionsSelected(event: AcOrderListCustomEvent<AcOrderList>) {\n    if(event.detail) {\n      event.detail.getSelectedOptions()\n      .then(({length}) => this.numberAvailableOptionsSelected = length);\n    } else {\n      this.numberAvailableOptionsSelected = 0;\n    }\n  }\n\n  componentDidRender() {\n    const drake = dragula([this.acListAvalibles.querySelector('.ac-list'), this.acListSelectedOptions.querySelector('.ac-list')], {\n      invalid: (el: HTMLElement) => {\n        return el.classList.contains('ac-list__list-separator');\n      }\n    });\n    drake\n    .on('drop', (el, target, source) => {\n        drake.cancel(true);\n        if (!source.parentElement || !target.parentElement) {\n          return;\n        }\n        const acListSource = source.parentElement.parentElement;\n        const acListTarget = target.parentElement.parentElement;\n        if (acListTarget === acListSource) {\n          return;\n        }\n        const option = acListSource.options.find(x => x.value.toString() === el.value.toString());\n        if (option) {\n          option.selected = false;\n          el.remove();\n          acListSource.options = acListSource.options.filter(x => x.value.toString() !== el.value.toString());\n          acListTarget.options = [\n            option,\n            ...acListTarget.options\n          ];\n        }\n      });\n  }\n\n  render() {\n    const disabledAddAll = this.acListAvalibles\n      ? this.acListAvalibles.options.length === 0\n      : false;\n    const disabledRemoveAll = this.acListSelectedOptions ? this.acListSelectedOptions.options.length === 0 : true;\n    return (\n    <Host>\n      <ac-order-list class=\"ac-pick-list__column\"\n          onListChange={this.handleChangeAclistAvailableOptionsSelected}\n          ref={acList => this.acListAvalibles = acList}\n          searchLabel={this.searchLabel}\n          label={this.availableLabel}\n          options={this.options}\n          no-results-label={this.noResultsLabel}\n          multiple={true}>\n          <slot />\n        </ac-order-list>\n        <section\n          class=\"ac-pick-list__column ac-pick-list__action-panel ac-pick-list__action-panel--gutter\">\n          <div class=\"ac-pick-list__cell ac-pick-list__cell--align-start ac-pick-list__cell--dir-col\">\n            <ac-button\n              disabled={this.numberAvailableOptionsSelected === 0}\n              class=\"ac-pick-list__button\"\n              onClick={this.addSelectedOptions}>\n              {this.addLabel}\n              <AcFaIcon slot=\"icon-start\"\n                icon={faAngleDoubleRight}\n                class={{\n                  \"ac-pick-list__button-icon\": true,\n                  \"ac-pick-list__button-icon--disabled\": this.numberAvailableOptionsSelected === 0\n                 }}\n                size={12}  />\n            </ac-button>\n            <ac-button\n              disabled={disabledAddAll}\n              class=\"ac-pick-list__button\"\n              fill=\"clear\"\n              theme=\"primary\"\n              onClick={this.addAllOptions}>\n              {this.addAllLabel}\n            </ac-button>\n          </div>\n          <div class=\"ac-pick-list__cell ac-pick-list__cell--align-end ac-pick-list__cell--dir-col\">\n            <ac-button\n              class=\"ac-pick-list__button\"\n              disabled={this.numberOfSelectedOptions === 0}\n              onClick={this.removeOptions}>\n              {this.removeLabel}\n              <AcFaIcon\n                slot=\"icon-start\"\n                icon={faAngleDoubleLeft}\n                class={{\n                  \"ac-pick-list__button-icon\": true,\n                  \"ac-pick-list__button-icon--disabled\": this.numberOfSelectedOptions === 0\n                 }}\n                 size={12}  />\n            </ac-button>\n            <ac-button\n              disabled={disabledRemoveAll}\n              fill=\"clear\"\n              theme=\"primary\"\n              class=\"ac-pick-list__button\"\n              onClick={this.removeAllOptions}>\n              {this.removeAllLabel}\n            </ac-button>\n          </div>\n        </section>\n        <ac-order-list class=\"ac-pick-list__column\"\n          ref={acList => this.acListSelectedOptions = acList}\n          onListChange={this.handleChangeAclistSelectedOptions}\n          label={this.selectedLabel}\n          multiple={true}\n          searchLabel={this.searchLabel}>\n        </ac-order-list>\n    </Host>);\n  }\n}\n"]}