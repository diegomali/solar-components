{"version":3,"file":"component-behavior.js","sourceRoot":"","sources":["../../../src/utils/stencil/component-behavior.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,YAAY,EAAE,MAAM,uBAAuB,CAAC;AAwBrD;;GAEG;AACH,MAAM,OAAO,iBAAiB;EAqB5B,YAAY,SAAY;IACtB,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;IAC3B,IAAI,IAAI,CAAC,YAAY,EAAE;MAAE,IAAI,CAAC,YAAY,EAAE,CAAC;KAAE;IAE/C,0BAA0B;IAC1B,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;MACzB,OAAO,CAAC,IAAI,CAAC,0CAA0C,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;MACzE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,GAAG,GAAG,EAAE;QAChC,IAAI,CAAC,SAAS,CAAC,oBAAoB,EAAE,CAAC;QACtC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;MACtD,CAAC,CAAC;MACF,UAAU,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,gBAAgB,EAAE,EAAE,CAAC,CAAC,CAAC;KACxD;IAED,YAAY,CAAC,IAAI,CAAC,SAAS,EAAE,kBAAkB,EAAE,gBAAgB,CAAC,EAAE;MAClE,IAAI,gBAAgB,EAAE;QAAE,gBAAgB,EAAE,CAAC;OAAE;MAC7C,IAAI,IAAI,CAAC,MAAM,EAAE;QAAE,IAAI,CAAC,MAAM,EAAE,CAAC;OAAE;IACrC,CAAC,CAAC,CAAC;IAEH,YAAY,CAAC,IAAI,CAAC,SAAS,EAAE,sBAAsB,EAAE,oBAAoB,CAAC,EAAE;MAC1E,IAAI,oBAAoB,EAAE;QAAE,oBAAoB,EAAE,CAAC;OAAE;MACrD,IAAI,IAAI,CAAC,MAAM,EAAE;QAAE,IAAI,CAAC,MAAM,EAAE,CAAC;OAAE;IACrC,CAAC,CAAC,CAAC;EACL,CAAC;CACF","sourcesContent":["import { ComponentInterface } from '@stencil/core';\r\n\r\nimport { extendMethod } from '../lang/extend-method';\r\n\r\n/**\r\n * Represents a Component that implements a Behavior Modification API.\r\n */\r\nexport interface ComponentBase extends ComponentInterface {\r\n  /**\r\n   * The main native nativeElement from the component.\r\n   * @Element\r\n   */\r\n  host: HTMLElement;\r\n\r\n  /**\r\n   * The unload lifecycle hook.\r\n   * Note that Stencil only calls disconnectedCallback if it is declared in the component.\r\n   */\r\n  disconnectedCallback: () => void;\r\n\r\n  /**\r\n   * If this behavior is applied to a native element.\r\n   */\r\n  native?: boolean;\r\n}\r\n\r\n/**\r\n * Represents a Component's Behavior Modification.\r\n */\r\nexport class ComponentBehavior<T extends ComponentBase> {\r\n  /**\r\n   * The internal component that this instance is attached.\r\n   */\r\n  component: T;\r\n\r\n  /**\r\n   * A hook called before the component load.\r\n   */\r\n  beforeAttach?(): Promise<any> | void;\r\n\r\n  /**\r\n   * A hook called after the component load.\r\n   */\r\n  attach?(): Promise<any> | void;\r\n\r\n  /**\r\n   * A hook called before the component destroy.\r\n   */\r\n  detach?(): Promise<any> | void;\r\n\r\n  constructor(component: T) {\r\n    this.component = component;\r\n    if (this.beforeAttach) { this.beforeAttach(); }\r\n\r\n    // Native Elements support\r\n    if (this.component.native) {\r\n      console.warn('Attaching a behavior to a native element', this.component);\r\n      this.component.host.remove = () => {\r\n        this.component.disconnectedCallback();\r\n        Element.prototype.remove.apply(this.component.host);\r\n      };\r\n      setTimeout(() => this.component.componentDidLoad(), 0);\r\n    }\r\n\r\n    extendMethod(this.component, 'componentDidLoad', componentDidLoad => {\r\n      if (componentDidLoad) { componentDidLoad(); }\r\n      if (this.attach) { this.attach(); }\r\n    });\r\n\r\n    extendMethod(this.component, 'disconnectedCallback', disconnectedCallback => {\r\n      if (disconnectedCallback) { disconnectedCallback(); }\r\n      if (this.detach) { this.detach(); }\r\n    });\r\n  }\r\n}\r\n"]}