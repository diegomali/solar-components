{"version":3,"file":"scroll-manager.js","sourceRoot":"","sources":["../../src/utils/scroll-manager.ts"],"names":[],"mappings":"AAAA;;;GAGG;AACH,MAAa,aAAa;EAoBxB,MAAM,CAAC,cAAc,CAAC,CAAC;IACrB,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,KAAK,CAAC;IACtB,IAAI,CAAC,CAAC,cAAc,EAAE;MACpB,CAAC,CAAC,cAAc,EAAE,CAAC;KACpB;IACD,CAAC,CAAC,WAAW,GAAG,KAAK,CAAC;EACxB,CAAC;EAED,MAAM,CAAC,2BAA2B,CAAC,CAAC;IAClC,IAAI,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE;MACjC,aAAa,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;MAChC,OAAO,KAAK,CAAC;KACd;EACH,CAAC;EAED;;;;;KAKG;EACH,MAAM,CAAC,OAAO,CAAC,GAAa;IAC1B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;IACvB,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC;IAE5B,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,OAAO,CAAC;IACtD,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAEzD,IAAI,GAAG,EAAE;MACP,MAAM,cAAc,GAAG,aAAa,CAAC,cAAc,CAAC;MACpD,MAAM,2BAA2B,GAAG,aAAa,CAAC,2BAA2B,CAAC;MAC9E,IAAI,MAAM,CAAC,gBAAgB,EAAE,EAAE,WAAW;QACxC,MAAM,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,cAAc,EAAE,KAAK,CAAC,CAAC;OAClE;MACD,MAAM,CAAC,OAAO,GAAG,cAAc,CAAC,CAAC,kBAAkB;MAClD,MAAc,CAAC,YAAY,GAAI,QAAgB,CAAC,YAAY,GAAG,cAAc,CAAC,CAAC,qBAAqB;MACrG,MAAM,CAAC,WAAW,GAAG,cAAc,CAAC,CAAC,SAAS;MAC9C,QAAQ,CAAC,SAAS,GAAG,2BAA2B,CAAC;KAClD;EACH,CAAC;EAED;;;KAGG;EACH,MAAM,CAAC,MAAM;IACX,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IACxB,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;IAE9B,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC;IACjD,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC;IAEnD,IAAI,IAAI,CAAC,gBAAgB,EAAE;MACzB,IAAI,MAAM,CAAC,mBAAmB,EAAE;QAC9B,MAAM,CAAC,mBAAmB,CAAC,gBAAgB,EAAE,aAAa,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;OACnF;MACA,MAAc,CAAC,YAAY,GAAI,QAAgB,CAAC,YAAY,GAAG,IAAI,CAAC;MACrE,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;MACtB,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC;MAC1B,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC;KAC3B;EACH,CAAC;;AA/EM,wBAAU,GAAG,KAAK,CAAC;AAG1B;;;;GAIG;AACI,kBAAI,GAAG;EACZ,EAAE,EAAE,CAAC;EACL,EAAE,EAAE,CAAC;EACL,EAAE,EAAE,CAAC;EACL,EAAE,EAAE,CAAC;EACL,EAAE,EAAE,CAAC;EACL,EAAE,EAAE,CAAC;EACL,EAAE,EAAE,CAAC;CACN,CAAC;SAlBS,aAAa","sourcesContent":["/**\n * Controls the state of scroll actions.\n * Thanks to @galambalazs.\n */\nexport class ScrollManager {\n\n  static isDisabled = false;\n  static isDisabledForAll: boolean;\n\n  /**\n   * A map object that list, enable/disable each keys that manipulate the scroll into the window.\n   * left: 37, up: 38, right: 39, down: 40,\n   * spacebar: 32, pageup: 33, pagedown: 34, end: 35, home: 36\n   */\n  static keys = {\n    37: 1,\n    38: 1,\n    39: 1,\n    40: 1,\n    32: 1,\n    33: 1,\n    34: 1\n  };\n\n  static preventDefault(e) {\n    e = e || window.event;\n    if (e.preventDefault) {\n      e.preventDefault();\n    }\n    e.returnValue = false;\n  }\n\n  static preventDefaultForScrollKeys(e) {\n    if (ScrollManager.keys[e.keyCode]) {\n      ScrollManager.preventDefault(e);\n      return false;\n    }\n  }\n\n  /**\n   * Override the main listeners, disabling the scroll for each enabled key in `keys` object.\n   * Also, set `height: 100vh` and `overflow: hidden` in the `html` element, forcing the content size to match\n   * with the window.\n   * @param all Disable the scroll for the browser.\n   */\n  static disable(all?: boolean) {\n    this.isDisabled = true;\n    this.isDisabledForAll = all;\n\n    document.querySelector('html').style.height = '100vh';\n    document.querySelector('html').style.overflow = 'hidden';\n\n    if (all) {\n      const preventDefault = ScrollManager.preventDefault;\n      const preventDefaultForScrollKeys = ScrollManager.preventDefaultForScrollKeys;\n      if (window.addEventListener) { // older FF\n        window.addEventListener('DOMMouseScroll', preventDefault, false);\n      }\n      window.onwheel = preventDefault; // modern standard\n      (window as any).onmousewheel = (document as any).onmousewheel = preventDefault; // older browsers, IE\n      window.ontouchmove = preventDefault; // mobile\n      document.onkeydown = preventDefaultForScrollKeys;\n    }\n  }\n\n  /**\n   * Reset the main listeners, enabling the scroll.\n   * Also reset the html element styles assigned before in `disable` function.\n   */\n  static enable() {\n    this.isDisabled = false;\n    this.isDisabledForAll = false;\n\n    document.querySelector('html').style.height = '';\n    document.querySelector('html').style.overflow = '';\n\n    if (this.isDisabledForAll) {\n      if (window.removeEventListener) {\n        window.removeEventListener('DOMMouseScroll', ScrollManager.preventDefault, false);\n      }\n      (window as any).onmousewheel = (document as any).onmousewheel = null;\n      window.onwheel = null;\n      window.ontouchmove = null;\n      document.onkeydown = null;\n    }\n  }\n}\n"]}