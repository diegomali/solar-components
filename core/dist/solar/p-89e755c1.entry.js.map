{"version":3,"names":["sortArray","array","order","property","sort","a","b","undefined","toLowerCase","buildContent","props","type","value","label","TableCell","content","h","onClick","innerHTML","TableBody","loading","class","AcFaIcon","icon","faSpinner","size","anim","rows","map","row","columns","cell","key","onSelect","length","colSpan","noResultsLabel","TableHeader","header","click","id","ordering","acTableCss","AcTable","selected","filters","limitRows","totalRows","search","onParamsDidUpdate","this","fetch","update","options","Object","assign","params","changeOrder","ev","target","change","emit","async","then","tableChange","catch","onAddFetch","componentDidLoad","render","selectRow","__decorate","Bind"],"sources":["./src/utils/collections/sort-array.ts","./src/components/atoms/ac-table/children/table-cell.tsx","./src/components/atoms/ac-table/children/table-body.tsx","./src/components/atoms/ac-table/children/table-header.tsx","./src/components/atoms/ac-table/ac-table.scss?tag=ac-table","./src/components/atoms/ac-table/ac-table.tsx"],"sourcesContent":["export function sortArray(array, order = 'asc', property) {\r\n\r\n  return array.sort((a, b) => {\r\n\r\n    // force null to last\r\n    a = a[property] === null || a[property] === undefined ? '' : a[property];\r\n    b = b[property] === null || b[property] === undefined ? '' : b[property];\r\n\r\n    // force any string values to lowercase\r\n    a = typeof a === 'string' ? a.toLowerCase() : a;\r\n    b = typeof b === 'string' ? b.toLowerCase() : b;\r\n\r\n    // Return either 1 or -1 to indicate a params priority\r\n    if (order === 'desc') {\r\n      return (b > a) ? 1 : (b < a) ? -1 : 0;\r\n    } else {\r\n      return (a > b) ? 1 : (a < b) ? -1 : 0;\r\n    }\r\n  });\r\n}\r\n","import { h } from '@stencil/core';\r\n\r\nconst buildContent = props => {\r\n  const type = props.type;\r\n  switch (type) {\r\n    case 'status':\r\n      return `<ac-badge type=\"${props.value.type}\" text=\"${props.value.label}\" upper-case />`;\r\n    default:\r\n      return props.value;\r\n  }\r\n};\r\n\r\nexport const TableCell = props => {\r\n  const content = buildContent(props);\r\n  return (\r\n    // @ts-ignore\r\n    <td onClick={() => props.onClick()} innerHTML={content}>\r\n    </td>);\r\n};\r\n","import { faSpinner } from '@fortawesome/free-solid-svg-icons';\r\nimport { h } from '@stencil/core';\r\n\r\nimport { AcFaIcon } from '../../../utils/ac-fa-icon';\r\n\r\nimport { TableCell } from './table-cell';\r\n\r\nexport const TableBody = props => {\r\n  return (\r\n    <tbody>\r\n    {\r\n      props.loading &&\r\n      <div class=\"table--loading\">\r\n        <AcFaIcon icon={faSpinner} size={20} anim=\"spin\"/>\r\n      </div>\r\n    }\r\n    {props.rows && props.rows.map(row =>\r\n      <tr>\r\n        {props.columns.map(cell =>\r\n          <TableCell\r\n            type={cell.type}\r\n            value={row[cell.key]}\r\n            onClick={() => props.onSelect && cell.type !== 'action' ? props.onSelect(row) : null}\r\n          />\r\n        )}\r\n      </tr>,\r\n    )}\r\n    {\r\n      (!props.rows || props.rows.length === 0) ?\r\n        <tr>\r\n          <td colSpan={props.columns.length}>{props.noResultsLabel || 'No Results Found.'}</td>\r\n        </tr> : null\r\n    }\r\n    </tbody>\r\n  );\r\n};\r\n","import { h } from '@stencil/core';\r\n\r\nexport const TableHeader = props => {\r\n  return (\r\n    <thead>\r\n    <tr>\r\n      {props.columns.map(header =>\r\n        <th\r\n          onClick={props.order ? props.click : () => {\r\n          }}\r\n          id={header.key}\r\n        >\r\n          <strong>{header.label}</strong>\r\n          {props.order.property === header.key ?\r\n            <span class={props.order ? `order-${props.order.ordering} order` : 'order'}>\r\n                <i class=\"fas fa-arrow-up\"></i>\r\n          </span>\r\n            : <span class=\"order-space-icon\"><i class=\"fas fa-arrow-up \"></i> </span>}\r\n        </th>\r\n      )}\r\n    </tr>\r\n    </thead>\r\n  );\r\n};\r\n","@import \"../../../theme/variables\";\r\n\r\n// ---------------------------------------------------------------------------------------------------------------------\r\n// General Style\r\n// ---------------------------------------------------------------------------------------------------------------------\r\n\r\nac-table {\r\n  table {\r\n    position: relative;\r\n    width: 100%;\r\n    border-collapse: collapse;\r\n  }\r\n\r\n  thead {\r\n    th {\r\n      padding-bottom: 11px;\r\n      border-bottom: 2px solid var-color(\"neutral\", \"lighter\");\r\n      text-align: start;\r\n      white-space: nowrap;\r\n\r\n      strong {\r\n        padding-right: $spacer-tiny;\r\n        color: var-color(\"neutral\", \"darker\");\r\n        font-weight: normal;\r\n        pointer-events: none;\r\n      }\r\n\r\n      i {\r\n        &:before {\r\n          color: var-color(\"neutral\", \"inverted\");\r\n          font-size: $spacer-tiny;\r\n        }\r\n\r\n        &:first-child {\r\n          transform: translateY(-4px);\r\n          transition: transform $slow-transition;\r\n\r\n        }\r\n      }\r\n\r\n      .order {\r\n        display: inline-flex;\r\n        position: relative;\r\n        align-items: flex-start;\r\n        justify-content: flex-start;\r\n        pointer-events: none;\r\n\r\n        &.order-asc {\r\n          i {\r\n            &:first-child {\r\n              transform: rotate(180deg);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      .order-space-icon {\r\n        visibility: hidden;\r\n      }\r\n    }\r\n  }\r\n\r\n  td {\r\n    border-bottom: 1px solid var-color(\"neutral\", \"lighter\");\r\n  }\r\n\r\n  tbody {\r\n    tr {\r\n      &:hover {\r\n        background-color: var-color(\"primary\", \"normal\", 0.04);\r\n        cursor: pointer;\r\n      }\r\n\r\n      td {\r\n        & > * {\r\n          display: flex;\r\n          flex-direction: column;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  tbody {\r\n    .table--loading {\r\n      display: flex;\r\n      position: absolute;\r\n      align-items: center;\r\n      justify-content: center;\r\n      width: 100%;\r\n      height: 100%;\r\n      background-color: var-color(\"neutral\", \"contrast\", 0.8);\r\n    }\r\n  }\r\n}\r\n\r\n","import { Component, Event, EventEmitter, Prop, Watch, h, Method } from '@stencil/core';\r\n\r\nimport { sortArray } from '../../../utils/collections/sort-array';\r\nimport { Bind } from '../../../utils/lang/bind';\r\n\r\nimport { TableBody } from './children/table-body';\r\nimport { TableHeader } from './children/table-header';\r\n\r\n@Component({\r\n  tag: 'ac-table',\r\n  styleUrl: 'ac-table.scss'\r\n})\r\nexport class AcTable {\r\n  /*\r\n  * Event to be issued when there is a change in orders.\r\n  */\r\n  @Event({ eventName: 'changeOrder' }) change: EventEmitter;\r\n\r\n  /*\r\n  * Emit event when table update\r\n  */\r\n  @Event({ eventName: 'tableChange' }) tableChange: EventEmitter;\r\n  /*\r\n  *  Header and Rows, can be modified directly or using the fetch method.\r\n  */\r\n  @Prop({ mutable: true }) options: Options;\r\n  /*\r\n  *  The fetch method is a callback that should return options.\r\n  */\r\n  @Prop({ mutable: true }) fetch: any;\r\n  /*\r\n  * The selectRow is callback with row, use for actions with row.\r\n  */\r\n  @Prop({ mutable: true }) selectRow: any;\r\n  /*\r\n  * Table has skeleton, but use loading after you have already set the Header.\r\n  */\r\n  @Prop({ mutable: true }) loading: boolean;\r\n  /*\r\n  * label for results not found.\r\n  */\r\n  @Prop({ mutable: true }) noResultsLabel: string;\r\n  /*\r\n  * When the parameters are changed and there is a fetch method, a new request is triggered.\r\n  */\r\n  @Prop({ mutable: true }) params = {\r\n    ordering: 'asc',\r\n    property: '',\r\n    selected: 1,\r\n    filters: {\r\n      limitRows: '',\r\n      totalRows: '',\r\n      search: ''\r\n    }\r\n  };\r\n\r\n  @Watch('params')\r\n  onParamsDidUpdate() {\r\n    if (this.fetch) {\r\n      this.update();\r\n    } else if (!this.fetch && this.options) {\r\n      this.options = {\r\n        ...this.options,\r\n        rows: sortArray(this.options.rows, this.params.ordering, this.params.property)\r\n      }\r\n    }\r\n  }\r\n\r\n  @Bind\r\n  changeOrder(ev) {\r\n    this.params = {\r\n      ...this.params,\r\n      property: ev.target.id,\r\n      ordering: this.params.ordering === 'asc' ? 'desc' : 'asc',\r\n    };\r\n    this.change.emit();\r\n  }\r\n\r\n  @Bind\r\n  @Method()\r\n  async update() {\r\n    this.fetch(this.params)\r\n      .then(rows => {\r\n        this.options = ({\r\n          ...this.options,\r\n          rows: rows.rows\r\n        });\r\n        this.tableChange.emit();\r\n      })\r\n      .catch(() => {\r\n        this.options = ({\r\n          ...this.options,\r\n          rows: null\r\n        })\r\n      });\r\n  }\r\n\r\n  @Watch('fetch')\r\n  onAddFetch() {\r\n    this.update();\r\n  }\r\n\r\n  componentDidLoad() {\r\n    if (this.fetch) {\r\n      this.update();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return [\r\n      this.options &&\r\n      <table class=\"table\">\r\n        <TableHeader columns={this.options ? this.options.header : null} click={this.changeOrder} order={this.params}/>\r\n        <TableBody\r\n          rows={this.options.rows}\r\n          columns={this.options.header}\r\n          onSelect={this.selectRow}\r\n          noResultsLabel={this.noResultsLabel}\r\n          loading={this.loading}\r\n        />\r\n      </table>\r\n    ];\r\n  }\r\n}\r\n\r\nexport interface Options {\r\n  header: [object],\r\n  rows: [object]\r\n}\r\n"],"mappings":"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"}