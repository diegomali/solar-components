import{h as t,r as e,c as r}from"./p-bfc2338d.js";import{B as s}from"./p-05671e06.js";import{f as a}from"./p-8fff0704.js";import{A as i}from"./p-d7dbca0e.js";function n(t,e="asc",r){return t.sort(((t,s)=>{t=t[r]===null||t[r]===undefined?"":t[r];s=s[r]===null||s[r]===undefined?"":s[r];t=typeof t==="string"?t.toLowerCase():t;s=typeof s==="string"?s.toLowerCase():s;if(e==="desc"){return s>t?1:s<t?-1:0}else{return t>s?1:t<s?-1:0}}))}const o=t=>{const e=t.type;switch(e){case"status":return`<ac-badge type="${t.value.type}" text="${t.value.label}" upper-case />`;default:return t.value}};const l=e=>{const r=o(e);return t("td",{onClick:()=>e.onClick(),innerHTML:r})};const c=e=>t("tbody",null,e.loading&&t("div",{class:"table--loading"},t(i,{icon:a,size:20,anim:"spin"})),e.rows&&e.rows.map((r=>t("tr",null,e.columns.map((s=>t(l,{type:s.type,value:r[s.key],onClick:()=>e.onSelect&&s.type!=="action"?e.onSelect(r):null})))))),!e.rows||e.rows.length===0?t("tr",null,t("td",{colSpan:e.columns.length},e.noResultsLabel||"No Results Found.")):null);const d=e=>t("thead",null,t("tr",null,e.columns.map((r=>t("th",{onClick:e.order?e.click:()=>{},id:r.key},t("strong",null,r.label),e.order.property===r.key?t("span",{class:e.order?`order-${e.order.ordering} order`:"order"},t("i",{class:"fas fa-arrow-up"})):t("span",{class:"order-space-icon"},t("i",{class:"fas fa-arrow-up "})," "))))));const h="ac-table table{position:relative;width:100%;border-collapse:collapse}ac-table thead th{padding-bottom:11px;border-bottom:2px solid var(--color-neutral-lighter, #F5F5F5);text-align:start;white-space:nowrap}ac-table thead th strong{padding-right:8px;color:var(--color-neutral-darker, #646464);font-weight:normal;pointer-events:none}ac-table thead th i:before{color:var(--color-neutral-inverted, #111111);font-size:8px}ac-table thead th i:first-child{transform:translateY(-4px);transition:transform ease-in-out 0.25s}ac-table thead th .order{display:inline-flex;position:relative;align-items:flex-start;justify-content:flex-start;pointer-events:none}ac-table thead th .order.order-asc i:first-child{transform:rotate(180deg)}ac-table thead th .order-space-icon{visibility:hidden}ac-table td{border-bottom:1px solid var(--color-neutral-lighter, #F5F5F5)}ac-table tbody tr:hover{background-color:rgba(var(--color-primary-normal-rgb, 0, 70, 111), 0.04);cursor:pointer}ac-table tbody tr td>*{display:flex;flex-direction:column}ac-table tbody .table--loading{display:flex;position:absolute;align-items:center;justify-content:center;width:100%;height:100%;background-color:rgba(var(--color-neutral-contrast-rgb, 255, 255, 255), 0.8)}";var u=undefined&&undefined.__decorate||function(t,e,r,s){var a=arguments.length,i=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,r):s,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(t,e,r,s);else for(var o=t.length-1;o>=0;o--)if(n=t[o])i=(a<3?n(i):a>3?n(e,r,i):n(e,r))||i;return a>3&&i&&Object.defineProperty(e,r,i),i};const f=class{constructor(t){e(this,t);this.change=r(this,"changeOrder",7);this.tableChange=r(this,"tableChange",7);this.options=undefined;this.fetch=undefined;this.selectRow=undefined;this.loading=undefined;this.noResultsLabel=undefined;this.params={ordering:"asc",property:"",selected:1,filters:{limitRows:"",totalRows:"",search:""}}}onParamsDidUpdate(){if(this.fetch){this.update()}else if(!this.fetch&&this.options){this.options=Object.assign(Object.assign({},this.options),{rows:n(this.options.rows,this.params.ordering,this.params.property)})}}changeOrder(t){this.params=Object.assign(Object.assign({},this.params),{property:t.target.id,ordering:this.params.ordering==="asc"?"desc":"asc"});this.change.emit()}async update(){this.fetch(this.params).then((t=>{this.options=Object.assign(Object.assign({},this.options),{rows:t.rows});this.tableChange.emit()})).catch((()=>{this.options=Object.assign(Object.assign({},this.options),{rows:null})}))}onAddFetch(){this.update()}componentDidLoad(){if(this.fetch){this.update()}}render(){return[this.options&&t("table",{class:"table"},t(d,{columns:this.options?this.options.header:null,click:this.changeOrder,order:this.params}),t(c,{rows:this.options.rows,columns:this.options.header,onSelect:this.selectRow,noResultsLabel:this.noResultsLabel,loading:this.loading}))]}static get watchers(){return{params:["onParamsDidUpdate"],fetch:["onAddFetch"]}}};u([s],f.prototype,"changeOrder",null);u([s],f.prototype,"update",null);f.style=h;export{f as ac_table};
//# sourceMappingURL=p-89e755c1.entry.js.map