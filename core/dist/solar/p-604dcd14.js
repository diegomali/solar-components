import{C as t}from"./p-bfa157e3.js";var e=undefined&&undefined.__rest||function(t,e){var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0)n[i]=t[i];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++){if(e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r]))n[i[r]]=t[i[r]]}return n};class n{createComponent(t,n){const{component:i,componentProps:r}=n,a=e(n,["component","componentProps"]);const o=document.createElement(t);if(a){Object.keys(a).forEach((t=>{if(typeof a[t]==="string"){o.setAttribute(t,a[t])}else{o[t]=a[t]}}))}if(i){if(typeof i==="string"){o.innerHTML=i}else{if(r){Object.assign(i,r)}o.appendChild(i)}}return o}async attachViewToDom(t,e){t.appendChild(e);await e.componentOnReady()}detachViewFromDom(t,e){return t.remove()}}const i=new n;var r=undefined&&undefined.__rest||function(t,e){var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0)n[i]=t[i];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++){if(e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r]))n[i[r]]=t[i[r]]}return n};class a extends t{attach(){this.root=document.querySelector(this.component.bound)||this.component.host.parentElement}detach(){return this.component.dismissAll?this.component.dismissAll():null}async create(t,e){const{wrapper:n,render:a}=t,o=r(t,["wrapper","render"]);const s=e||i;if(a){return new Promise((t=>{n.vchildren=a({ref:t,Tag:this.component.target});this.root.appendChild(n)}))}else{const t=await s.createComponent(this.component.target,o);t.controller=this.component;t._resolveDismiss=null;t._resolveWillDismiss=null;t.onDidDismiss=()=>new Promise((e=>t._resolveDismiss=e));t.onWillDismiss=()=>new Promise((e=>t._resolveWillDismiss=e));t.dismiss=async e=>{let i=true;if(this.component.willDismissComponent){i=await this.component.willDismissComponent(t,e)}if(i){if(t._resolveWillDismiss){await t._resolveWillDismiss(e)}if(n){await s.detachViewFromDom(n,o)}else{await s.detachViewFromDom(t,o)}if(t._resolveDismiss){await t._resolveDismiss(e)}}};if(n){n.appendChild(t);await s.attachViewToDom(this.root,n)}else{await s.attachViewToDom(this.root,t)}return t}}}export{a as C};
//# sourceMappingURL=p-604dcd14.js.map