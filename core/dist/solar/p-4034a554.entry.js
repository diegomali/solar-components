import{r as t,c as e,h as s,H as i,g as a}from"./p-bfc2338d.js";import{A as h}from"./p-183f60b9.js";import{c as n,e as o}from"./p-554e1c79.js";import{B as l}from"./p-05671e06.js";import{D as c}from"./p-da0ddaf0.js";import{F as r}from"./p-d228c1a4.js";import{F as d}from"./p-09dd3509.js";import{A as f}from"./p-d7dbca0e.js";import{f as p}from"./p-8fff0704.js";import"./p-bfa157e3.js";import"./p-5fa792ab.js";import"./p-5d5098fe.js";import"./p-fe5b2c7a.js";import"./p-112455b1.js";const u=".ac-autocomplete{display:flex;flex:1;flex-direction:column}.ac-autocomplete .ac-autocomplete__icon{margin:8px}";var m=undefined&&undefined.__decorate||function(t,e,s,i){var a=arguments.length,h=a<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,s):i,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")h=Reflect.decorate(t,e,s,i);else for(var o=t.length-1;o>=0;o--)if(n=t[o])h=(a<3?n(h):a>3?n(e,s,h):n(e,s))||h;return a>3&&h&&Object.defineProperty(e,s,h),h};const b=class{constructor(s){t(this,s);this.selectChange=e(this,"selectChange",7);this.asyncDataBehavior=new h(this);this.formFieldBehavior=new d(this);this.requestCheckValidity=false;this.SelectPanel=n(o("ac-panel-controller"));this.focusBehavior=new r(this);this.name=undefined;this.disabled=undefined;this.required=undefined;this.noResultsLabel="No results for";this.fetch=undefined;this.loading=undefined;this.options=[];this.validator=undefined;this.error=undefined;this.size=undefined;this.label=undefined;this.value=undefined;this.selectedText=undefined;this.filter=undefined;this.isPanelOpen=false;this.validity=undefined}errorDidUpdate(t){if(t){this.acInputBase.error=true;this.formFieldBehavior.setInvalid()}else{this.acInputBase.error=false;this.formFieldBehavior.setValid()}}async getFormFieldBehavior(){return this.formFieldBehavior}handleSelected(t){this.selectedText=t.title;this.value=t.value;this.requestCheckValidity=true;this.formFieldBehavior.setDirty();this.filter=null;this.isPanelOpen=false}async handleDebouncedKeyUp(t){const{target:{value:e}}=t;this.filter=e;this.asyncDataBehavior.executeFetch()}getFetchParams(){return{filter:this.filter}}isShowingPanelDidUpdate(){this.hasFocus=this.isPanelOpen}whenReceiveData(t){this.options=t.data;this.isPanelOpen=true}componentDidUpdate(){if(this.requestCheckValidity){this.formFieldBehavior.checkValidity(this.value);this.requestCheckValidity=false;this.selectChange.emit(this.value)}}whenBlur(t){if(!this.selectPanel.contains(t)){if(this.isPanelOpen){this.isPanelOpen=!this.isPanelOpen}if(this.requestCheckValidity===false&&this.isPanelOpen===false){if(!this.options.some((t=>t.title.toString().toUpperCase().includes(this.acInputBase.value.toUpperCase())))){this.acInputBase.value=""}}this.formFieldBehavior.setTouched()}}disconnectedCallback(){this.isPanelOpen=false}render(){const t=this.SelectPanel;return s(i,{class:"ac-autocomplete"},s("ac-input-base",{ref:t=>this.acInputBase=t,class:"ac-autocomplete__input",name:this.name,disabled:this.disabled,type:"text",label:this.label,value:this.selectedText,onKeyUp:this.handleDebouncedKeyUp,size:this.size},this.loading&&s(f,{slot:"item-end",class:"ac-autocomplete__icon",icon:p,size:14,anim:"spin"})),s(t,{ref:t=>this.selectPanel=t,class:"ac-autocomplete__panel",popperPivot:this.host,reset:!this.isPanelOpen},s("ul",{class:"ac-autocomplete__list ac-list"},this.options.length===0?s("li",{class:"ac-list__item"},this.noResultsLabel," ",this.filter):this.options.map(((t,e)=>s("li",{class:"ac-list__item",key:e,tabIndex:e,value:t.value,onClick:()=>this.handleSelected(t)},t.title))))))}get host(){return a(this)}static get watchers(){return{error:["errorDidUpdate"],isPanelOpen:["isShowingPanelDidUpdate"]}}};m([l],b.prototype,"handleSelected",null);m([l,c(200)],b.prototype,"handleDebouncedKeyUp",null);b.style=u;export{b as ac_autocomplete};
//# sourceMappingURL=p-4034a554.entry.js.map